{"version":3,"sources":["../../src/util/url.js"],"names":["query","name","url","location","search","value","match","RegExp","decodeURIComponent","$2","replace","param","obj","str","k","hasOwnProperty","v","push","encodeURIComponent","join","module","exports"],"mappings":";;;;;;;;AAAA;;;;;;AAMA,SAASA,KAAT,CAAeC,IAAf,EAAqBC,GAArB,EAA0B;AACxB,MAAI,CAACD,IAAL,EAAW;AACT,WAAO,EAAP;AACD;;AAED,MAAI,CAACC,GAAL,EAAU;AACR,QAAI,OAAOC,QAAP,KAAoB,WAApB,IAAmC,CAACA,SAASC,MAAjD,EAAyD;AACvD,aAAO,EAAP;AACD;;AAEDF,UAAMC,SAASC,MAAf;AACD;;AAED,MAAIC,QAAQH,IACTI,KADS,CACH,IAAIC,MAAJ,CAAW,aAAaN,IAAb,GAAoB,eAA/B,CADG,IAERO,mBAAmBD,OAAOE,EAA1B,CAFQ,GAEwB,EAFpC;;AAIA,MAAIJ,MAAMC,KAAN,CAAY,cAAZ,CAAJ,EAAiC;AAC/B;AACAD,YAAQA,MAAMK,OAAN,CAAc,eAAd,EAA+B,EAA/B,CAAR;AACD;;AAED,SAAOL,KAAP;AACD;;AAED;;;;;;AAMA,SAASM,KAAT,CAAeC,GAAf,EAAoB;AAClB,MAAI,CAACA,GAAL,EAAU;AACR,WAAO,EAAP;AACD;;AAED,MAAIC,MAAM,EAAV;;AAEA,OAAK,IAAIC,CAAT,IAAcF,GAAd,EAAmB;AACjB,QAAIA,IAAIG,cAAJ,CAAmBD,CAAnB,CAAJ,EAA2B;AACzB,UAAIE,IAAI,OAAOJ,IAAIE,CAAJ,CAAP,KAAkB,WAAlB,GAAgCF,IAAIE,CAAJ,CAAhC,GAAyC,EAAjD;AACAD,UAAII,IAAJ,CAASC,mBAAmBJ,CAAnB,IAAwB,GAAxB,GAA8BI,mBAAmB,yBAAeF,CAAf,CAAnB,CAAvC;AACD;AACF;;AAED,SAAOH,IAAIM,IAAJ,CAAS,GAAT,CAAP;AACD;;AAEDC,OAAOC,OAAP,GAAiB;AACfrB,SAAOA,KADQ;AAEfW,SAAOA;AAFQ,CAAjB","file":"url.js","sourcesContent":["/**\n * 获取查询参数\n * @param {String} name 查询参数\n * @param {String} [url] 链接地址\n * @return {String}\n */\nfunction query(name, url) {\n  if (!name) {\n    return '';\n  }\n\n  if (!url) {\n    if (typeof location === 'undefined' || !location.search) {\n      return '';\n    }\n\n    url = location.search;\n  }\n\n  let value = url\n    .match(new RegExp('(\\\\??|&)' + name + '=([^&]*)(&|$)'))\n    ? decodeURIComponent(RegExp.$2) : '';\n\n  if (value.match(/<\\/?script>/i)) {\n    // 自动去除特殊标签，避免 xss 共计\n    value = value.replace(/<\\/?script>/ig, '');\n  }\n\n  return value;\n}\n\n/**\n * 按照key/value对序列化普通对象。注意此处只支持浅层序列化，\n * 即 obj 字段的值不能够为对象，例如 {a:1,b:{c:1}} 就不行，但 {a:1,c:1} 就可以\n * @param {Object} obj\n * @return {String}\n */\nfunction param(obj) {\n  if (!obj) {\n    return '';\n  }\n\n  var str = [];\n\n  for (var k in obj) {\n    if (obj.hasOwnProperty(k)) {\n      var v = typeof obj[k] !== 'undefined' ? obj[k] : '';\n      str.push(encodeURIComponent(k) + '=' + encodeURIComponent(JSON.stringify(v)));\n    }\n  }\n\n  return str.join('&');\n}\n\nmodule.exports = {\n  query: query,\n  param: param\n};\n"]}