{"version":3,"sources":["../../../src/server/public/main.js"],"names":["db","m","request","then","data","mount","document","getElementById","view","keys","resourceList","map","key","href","Array","isArray","length","concat","customRoutes","rules","rule"],"mappings":";;;;;;;;AAAA;;AAEA;AACA,IAAIA,KAAK,EAAT;;AAEAC,EAAEC,OAAF,CAAU,IAAV,EAAgBC,IAAhB,CAAqB,UAAUC,IAAV,EAAgB;AACnCJ,OAAKI,IAAL;AACD,CAFD;;AAIAH,EAAEI,KAAF,CACEC,SAASC,cAAT,CAAwB,WAAxB,CADF,EAEE;AACEC,QAAM,gBAAY;AAChB,QAAIC,OAAO,oBAAYT,EAAZ,CAAX;AACA,QAAIU,eACFT,EACE,IADF,EAEEQ,KACGE,GADH,CACO,UAAUC,GAAV,EAAe;AAClB,aAAOX,EAAE,IAAF,EAAQ,CACbA,EAAE,GAAF,EAAO,EAAEY,MAAMD,GAAR,EAAP,EAAsB,MAAMA,GAA5B,CADa,EAEbX,EAAE,KAAF,EAASa,MAAMC,OAAN,CAAcf,GAAGY,GAAH,CAAd,IACL,MAAMZ,GAAGY,GAAH,EAAQI,MAAd,GAAuB,GADlB,GAEL,SAFJ,CAFa,CAAR,CAAP;AAOD,KATH,EAUGC,MAVH,CAUU,CACNhB,EAAE,GAAF,EAAO,EAAEY,MAAM,IAAR,EAAP,EAAuB,KAAvB,CADM,EAENZ,EAAE,KAAF,EAASA,EAAE,IAAF,EAAQ,QAAR,CAAT,CAFM,CAVV,CAFF,CADF;;AAoBA,WAAO,CACLA,EAAE,IAAF,EAAQ,WAAR,CADK,EAELQ,KAAKO,MAAL,GACIN,YADJ,GAEIT,EAAE,GAAF,EAAO,oBAAP,CAJC,CAAP;AAMD;AA7BH,CAFF;;AAmCA;AACA,IAAIiB,eAAe,EAAnB;;AAEAjB,EAAEC,OAAF,CAAU,SAAV,EAAqBC,IAArB,CAA0B,UAAUC,IAAV,EAAgB;AACxCc,iBAAed,IAAf;AACD,CAFD;;AAIAH,EAAEI,KAAF,CACEC,SAASC,cAAT,CAAwB,eAAxB,CADF,EAEE;AACEC,QAAM,gBAAY;AAChB,QAAIW,QAAQ,oBAAYD,YAAZ,CAAZ;AACA,QAAIC,MAAMH,MAAV,EAAkB;AAChB,aAAO,CACLf,EAAE,IAAF,EAAQ,eAAR,CADK,EAELA,EAAE,OAAF,EAAWkB,MAAMR,GAAN,CAAU,UAAUS,IAAV,EAAgB;AACnC,eAAOnB,EAAE,IAAF,EAAQ,CACbA,EAAE,IAAF,EAAQmB,IAAR,CADa,EAEbnB,EAAE,IAAF,EAAQ,OAAOiB,aAAaE,IAAb,CAAf,CAFa,CAAR,CAAP;AAID,OALU,CAAX,CAFK,CAAP;AASD;AACF;AAdH,CAFF","file":"main.js","sourcesContent":["/* global m */\n\n// Resource list\nvar db = {}\n\nm.request('db').then(function (data) {\n  db = data\n})\n\nm.mount(\n  document.getElementById('resources'),\n  {\n    view: function () {\n      var keys = Object.keys(db)\n      var resourceList = (\n        m(\n          'ul',\n          keys\n            .map(function (key) {\n              return m('li', [\n                m('a', { href: key }, '/' + key),\n                m('sup', Array.isArray(db[key])\n                  ? ' ' + db[key].length + 'x'\n                  : ' object'\n                )\n              ])\n            })\n            .concat([\n              m('a', { href: 'db' }, '/db'),\n              m('sup', m('em', ' state'))\n            ])\n        )\n      )\n\n      return [\n        m('h4', 'Resources'),\n        keys.length\n          ? resourceList\n          : m('p', 'No resources found')\n      ]\n    }\n  }\n)\n\n// Custom routes\nvar customRoutes = {}\n\nm.request('__rules').then(function (data) {\n  customRoutes = data\n})\n\nm.mount(\n  document.getElementById('custom-routes'),\n  {\n    view: function () {\n      var rules = Object.keys(customRoutes)\n      if (rules.length) {\n        return [\n          m('h4', 'Custom routes'),\n          m('table', rules.map(function (rule) {\n            return m('tr', [\n              m('td', rule),\n              m('td', 'â‡¢ ' + customRoutes[rule])\n            ])\n          }))\n        ]\n      }\n    }\n  }\n)\n"]}